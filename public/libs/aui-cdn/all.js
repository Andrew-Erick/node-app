var AP=function(){function h(c,b){b=b||X;var a=[];if(c)if("string"===typeof c)c=b.querySelectorAll(c),c=Array.prototype.slice.call(c),Array.prototype.push.apply(a,c);else if(1===c.nodeType)a.push(c);else if(c===window)a.push(c);else if("function"===typeof c)h.onDomLoad(c);p.extend(a,{each:function(d){R(this,d);return this},bind:function(d,a){this.each(function(b,c){this.bind(c,d,a)})},attr:function(d){var a;this.each(function(b,c){a=c[d]||c.getAttribute&&c.getAttribute(d);return!a});return a},removeClass:function(a){return this.each(function(d,
b){b.className&&(b.className=b.className.replace(new RegExp("(^|\\s)"+a+"(\\s|$)")," "))})},html:function(a){return this.each(function(d,b){b.innerHTML=a})},append:function(a){return this.each(function(d,c){var g=b.createElement(a.tag);R(a,function(a,d){"$text"===a?g.styleSheet?g.styleSheet.cssText=d:g.appendChild(b.createTextNode(d)):"tag"!==a&&(g[a]=d)});c.appendChild(g)})}});return a}function n(c,b){c+="EventListener";b+="Event";return function(a,d,g){if(a[c])a[c](d,g,!1);else if(a[b])a[b]("on"+
d,g)}}function r(){var c=h(".ac-content, #content");return 0<c.length?c[0]:document.body}function u(){this.q=[];this.add=function(a){this.q.push(a)};var c,b;this.call=function(){c=0;for(b=this.q.length;c<b;c++)this.q[c].call()}}function e(c,b){if(!c.resizedAttached)c.resizedAttached=new u,c.resizedAttached.add(b);else if(c.resizedAttached){c.resizedAttached.add(b);return}"BODY"===c.nodeName&&["padding","margin"].forEach(function(a){c.style[a+"-bottom"]="0px";c.style[a+"-top"]="0px"},this);c.resizeSensor=
document.createElement("div");c.resizeSensor.className="ac-resize-sensor";c.resizeSensor.style.cssText="position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;";c.resizeSensor.innerHTML='\x3cdiv class\x3d"ac-resize-sensor-expand" style\x3d"position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;"\x3e\x3cdiv style\x3d"position: absolute; left: 0; top: 0;"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"ac-resize-sensor-shrink" style\x3d"position: absolute; left: 0; top: 0; right: 0; bottom: 0; overflow: scroll; z-index: -1; visibility: hidden;"\x3e\x3cdiv style\x3d"position: absolute; left: 0; top: 0; width: 200%; height: 200%"\x3e\x3c/div\x3e\x3c/div\x3e';
c.appendChild(c.resizeSensor);"BODY"!==c.nodeName&&window.getComputedStyle&&"static"===window.getComputedStyle(c).position&&(c.style.position="relative");var a=c.resizeSensor.childNodes[0],d=a.childNodes[0],g=c.resizeSensor.childNodes[1],m,q,f=function(){d.style.width=a.offsetWidth+10+"px";d.style.height=a.offsetHeight+10+"px";a.scrollLeft=a.scrollWidth;a.scrollTop=a.scrollHeight;g.scrollLeft=g.scrollWidth;g.scrollTop=g.scrollHeight;m=c.offsetWidth;q=c.offsetHeight};f();b=function(){(c.offsetWidth!==
m||c.offsetHeight!==q)&&c.resizedAttached&&c.resizedAttached.call();f()};a.addEventListener("scroll",b);g.addEventListener("scroll",b);b=new MutationObserver(b);c.resizeObserver=b;b.observe(c,{attributes:!0,attributeFilter:["style"]})}function t(c,b){var a,d;if(c)if(a=c.length,null!=a&&"function"!==typeof c)for(d=0;d<a&&!1!==b.call(c[d],d,c[d]);)d+=1;else for(d in c)if(c.hasOwnProperty(d)&&!1===b.call(c[d],d,c[d]))break}function f(c,b){c+="EventListener";b+="Event";return function(a,d,g){if(a[c])a[c](d,
g,!1);else if(a[b])a[b]("on"+d,g)}}function F(){var c=this.console;if(c&&c.log){var b=[].slice.call(arguments);if(c.log.apply)c.log.apply(c,b);else{for(var a=0,d=b.length;a<d;a+=1)b[a]=JSON.stringify(b[a]);c.log(b.join(" "))}return!0}}function l(c,b){if((c=z[c])&&0!==c.length)try{c.forEach(function(a){a.call(null,b)})}catch(a){console.error(a)}}function Y(c,b){var a=z[c],d="close"!==c,g=null;if(!d||"undefined"!==typeof b.button){b&&b.button&&b.button.name&&(g=k.dialog.getButton(b.button.name));"submit"===
c&&k.dialog._disableCloseOnSubmit&&(d=!1);try{a&&(d=a.reduce(function(a,d){return d.call(g,b)&&a},d))}catch(m){console.error(m)}finally{delete z[c]}d&&k.dialog.close()}}function L(c,b){"function"===typeof b&&(z[c]||(z[c]=[]),z[c].push(b))}function S(c,b){var a=[],d=0,g=c.length;if(c&&0<c.length)for(;d<g;d+=1){var m=T(c[d]);a.push(m);if(a.length===g){for(var m=[],q=0;q<g;q+=1)m[q]=a[q].exports;b&&b.apply(window,m)}}else b&&b()}function T(c){if(G[c])return G[c];var b=Z(c);return b?G[c]=b:G[c]={name:c,
exports:function(){function a(){var d=a.__target__;if(d)return d.apply(window,arguments)}return a}()}}function Z(c){var b;if(k._hostModules&&(k._hostModules[c]&&(b=k._hostModules[c]),k._hostModules._globals&&k._hostModules._globals[c]&&(b=k._hostModules._globals[c]),b))return{name:c,exports:b}}function M(c){return C("meta[name\x3d'ap-"+c+"']").attr("content")}var y="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(c){return typeof c}:function(c){return c&&"function"===typeof Symbol&&
c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},w=function(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function");},aa=Object.assign||function(c){for(var b=1;b<arguments.length;b++){var a=arguments[b],d;for(d in a)Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d])}return c},H=function(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);c.prototype=Object.create(b&&b.prototype,
{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(c,b):c.__proto__=b)},I=function(c,b){if(!c)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==typeof b&&"function"!==typeof b?c:b},U=Function.prototype.bind,p={locationOrigin:function(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:
"")},randomString:function(){return Math.floor(1E9*Math.random()).toString(16)},isString:function(c){return"string"===typeof c||c instanceof String},argumentsToArray:function(c){return Array.prototype.slice.call(c)},argumentNames:function(c){return c.toString().replace(/((\/\/.*$)|(\/\*[^]*?\*\/))/mg,"").replace(/[^(]+\(([^)]*)[^]+/,"$1").match(/([^\s,]+)/g)||[]},hasCallback:function(c){var b=c.length;return 0<b&&"function"===typeof c[b-1]},error:function(c){if(window.console&&window.console.error){var b=
[];"string"===typeof c?(b.push("[Simple-XDM] "+c),b=b.concat(Array.prototype.slice.call(arguments,1))):(b.push("[Simple-XDM] "),b=b.concat(Array.prototype.slice.call(arguments)));window.console.error.apply(null,b)}},warn:function(c){window.console&&console.warn("[Simple-XDM] "+c)},_bind:function(c,b){return U&&b.bind===U?b.bind(c):function(){return b.apply(c,arguments)}},throttle:function(c,b,a){var d=0;return function(){var g=Date.now();g-d>b&&(d=g,c.apply(a,arguments))}},each:function(c,b){var a,
d;if(c)if(a=c.length,null!=a&&"function"!==typeof c)for(d=0;d<a&&!1!==b.call(c[d],d,c[d]);)d+=1;else for(d in c)if(c.hasOwnProperty(d)&&!1===b.call(c[d],d,c[d]))break},extend:function(c){var b=arguments;[].slice.call(b,1,b.length).forEach(function(a){"object"===("undefined"===typeof a?"undefined":y(a))&&Object.getOwnPropertyNames(a).forEach(function(d){c[d]=a[d]})});return c},sanitizeStructuredClone:function(c){function b(c){if("function"===typeof c)return g("A function was detected and removed from the message."),
null;if(d.some(function(a){return c instanceof a?(g(a.name+" object was detected and removed from the message."),!0):!1}))return{};if(c&&"object"===("undefined"===typeof c?"undefined":y(c))&&a.every(function(a){return!(c instanceof a)})){var q=void 0;if(Array.isArray(c))q=c.map(function(a){return b(a)});else{if(-1<m.indexOf(c))return g("A circular reference was detected and removed from the message."),null;m.push(c);var q={},f;for(f in c)if(c.hasOwnProperty(f)){var e=b(c[f]);null!==e&&(q[f]=e)}m.pop()}return q}return c}
var a=[Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer],d=[Error,Node],g=p.warn,m=[];return b(c)}},x=function(){function c(b){w(this,c);this._registerListener((b||{}).listenOn)}c.prototype._registerListener=function(b){b&&b.addEventListener||(b=window);b.addEventListener("message",p._bind(this,this._receiveMessage),!1)};c.prototype._receiveMessage=function(b){var a=this._messageHandlers[b.data.type],d=b.data.eid,c=void 0;d&&this._registeredExtensions&&(c=this._registeredExtensions[d]);if(!a||
!this._checkOrigin(b,c))return!1;a.call(this,b,c)};return c}(),ca=function(c){function b(a){w(this,b);a=a||{};var d=I(this,c.call(this,a));d._registeredExtensions=a.extensions||{};d._registeredAPIModules={};d._registeredAPIModules._globals={};d._pendingCallbacks={};d._keycodeCallbacks={};d._clickHandler=null;d._pendingEvents={};d._messageHandlers={init:d._handleInit,req:d._handleRequest,resp:d._handleResponse,broadcast:d._handleBroadcast,event_query:d._handleEventQuery,key_triggered:d._handleKeyTriggered,
addon_clicked:d._handleAddonClick,get_host_offset:d._getHostOffset,unload:d._handleUnload,sub:d._handleSubInit};return d}H(b,c);b.prototype._padUndefinedArguments=function(a,d){return a.length>=d?a:a.concat(Array(d-a.length))};b.prototype._verifyAPI=function(a,d){function b(a,d){Object.getOwnPropertyNames(d).forEach(function(c){"object"===y(d[c])&&a[c]?b(a[c],d[c]):"parent"===d[c]&&a[c]&&(f=!0)})}var c=a.data.targets;if(c){var q=this.getApiSpec(),f=!1;b(q,c);a.source.postMessage({type:"api_tamper",
tampered:f},d.extension.url)}};b.prototype._handleInit=function(a,d){this._registeredExtensions[d.extension_id].source=a.source;d.initCallback&&(d.initCallback(a.data.eid),delete d.initCallback);a.data.targets&&this._verifyAPI(a,d)};b.prototype._handleSubInit=function(a,d){this.registerExtension(a.data.ext.id,{extension:a.data.ext})};b.prototype._getHostOffset=function(a,d){var b=a.source,c=null;d=d||window;d===d.top&&"function"===typeof d.getHostOffsetFunctionOverride&&(c=d.getHostOffsetFunctionOverride(b));
if("number"!==typeof c)for(c=0;!this._hasSameOrigin(b);)c++,b=b.parent;a.source.postMessage({hostFrameOffset:c},a.origin)};b.prototype._hasSameOrigin=function(a){if(a===a.top)return!0;try{var d="test_var_"+Math.random().toString(16).substr(2);a[d]=!0;return a[d]}catch(g){}return!1};b.prototype._handleResponse=function(a){a=a.data;var d=this._pendingCallbacks[a.mid];d&&(delete this._pendingCallbacks[a.mid],d.apply(window,a.args))};b.prototype.registerRequestNotifier=function(a){this._registeredRequestNotifier=
a};b.prototype._handleRequest=function(a,d){function b(){var b=p.sanitizeStructuredClone(p.argumentsToArray(arguments));a.source.postMessage({mid:a.data.mid,type:"resp",forPlugin:!0,args:b},d.extension.url)}var c=a.data,q=this._registeredAPIModules[c.mod],f=this.getRegisteredExtensions(d.extension)[0];if(q){var e=c.fn;if(c._cls){var l=q[c._cls],k=c.mod+"-"+c._cls+"-";b._id=c._id;"constructor"===e?(l._construct||(l.constructor.prototype._destroy=function(){delete this._context._proxies[k+this._id]},
l._construct=function(){for(var a=arguments.length,d=Array(a),b=0;b<a;b++)d[b]=arguments[b];a=new (Function.prototype.bind.apply(l.constructor,[null].concat(d)));d=d[d.length-1];a._id=d._id;a._context=d._context;return a._context._proxies[k+a._id]=a}),q=l,e="_construct"):q=f._proxies[k+c._id]}var h=q[e];if(h){var J=c.args,V=h.length-1;"_construct"===e&&(V=q.constructor.length-1);b._context=f;J=this._padUndefinedArguments(J,V);J.push(b);q=h.apply(q,J);h.returnsPromise&&(q&&q instanceof Promise?q.then(function(a){b(void 0,
a)}).catch(function(a){a=a instanceof Error?a.message:a;b(a)}):b("Defined module method did not return a promise."));this._registeredRequestNotifier&&this._registeredRequestNotifier.call(null,{module:c.mod,fn:c.fn,type:c.type,addon_key:d.extension.addon_key,key:d.extension.key,extension_id:d.extension_id})}}};b.prototype._handleBroadcast=function(a,d){a=a.data;this.dispatch(a.etyp,function(a){return a.extension.addon_key===d.extension.addon_key&&a.extension_id!==d.extension_id},a.evnt,null,null)};
b.prototype._handleKeyTriggered=function(a,d){var b=a.data;a=this._keycodeKey(b.keycode,b.modifiers,d.extension_id);(a=this._keycodeCallbacks[a])&&a.forEach(function(a){a.call(null,{addon_key:d.extension.addon_key,key:d.extension.key,extension_id:d.extension_id,keycode:b.keycode,modifiers:b.modifiers})},this)};b.prototype.defineAPIModule=function(a,d){d=d||"_globals";this._registeredAPIModules[d]=p.extend({},this._registeredAPIModules[d]||{},a);return this._registeredAPIModules};b.prototype._fullKey=
function(a){var d=a.addon_key||"global";a.key&&(d=d+"@@"+a.key);return d};b.prototype.queueEvent=function(a,d,b,c){this._findRegistrations(d).some(function(a){return void 0!==a.registered_events},this)?this.dispatch(a,d,b,c):this._pendingEvents[this._fullKey(d)]={type:a,targetSpec:d,event:b,callback:c,time:(new Date).getTime(),uid:p.randomString()}};b.prototype._handleEventQuery=function(a,d){var b=this,c={},q=(new Date).getTime();Object.keys(this._pendingEvents).forEach(function(g){var m=b._pendingEvents[g],
f=3E4>=q-m.time,e=!m.targetSpec||0!==b._findRegistrations(m.targetSpec).length;e&&m.targetSpec.key&&(e=m.targetSpec.addon_key===d.extension.addon_key&&m.targetSpec.key===d.extension.key);f&&e?(c[g]=m,m.targetSpec=m.targetSpec||{},b.dispatch(m.type,m.targetSpec,m.event,m.callback,a.source)):f||delete b._pendingEvents[g]});this._registeredExtensions[d.extension_id].registered_events=a.data.args;return c};b.prototype._handleUnload=function(a,d){d&&(d.extension_id&&this._registeredExtensions[d.extension_id]&&
delete this._registeredExtensions[d.extension_id].source,d.unloadCallback&&d.unloadCallback(a.data.eid))};b.prototype.dispatch=function(a,d,b,c,q){function g(d,b){if(d.source&&d.source.postMessage){var g;c&&(g=p.randomString(),this._pendingCallbacks[g]=c);d.source.postMessage({type:"evt",mid:g,etyp:a,evnt:b},d.extension.url)}}this._findRegistrations(d||{}).forEach(function(a){q&&!a.source&&(a.source=q);a.source&&p._bind(this,g)(a,b)},this)};b.prototype._findRegistrations=function(a){var d=this;if(0===
this._registeredExtensions.length)return p.error("no registered extensions",this._registeredExtensions),[];var b=Object.getOwnPropertyNames(a),c=Object.getOwnPropertyNames(this._registeredExtensions).map(function(a){return d._registeredExtensions[a]});return a instanceof Function?c.filter(a):c.filter(function(d){return b.every(function(b){return d.extension[b]===a[b]})})};b.prototype.registerExtension=function(a,d){d._proxies={};d.extension_id=a;this._registeredExtensions[a]=d};b.prototype._keycodeKey=
function(a,d,b){var c=a;d&&("string"===typeof d&&(d=[d]),d.sort(),d.forEach(function(a){c+="$$"+a},this));return c+"__"+b};b.prototype.registerKeyListener=function(a,d,b,c){"string"===typeof b&&(b=[b]);var g=this._registeredExtensions[a];a=this._keycodeKey(d,b,a);this._keycodeCallbacks[a]||(this._keycodeCallbacks[a]=[],g.source.postMessage({type:"key_listen",keycode:d,modifiers:b,action:"add"},g.extension.url));this._keycodeCallbacks[a].push(c)};b.prototype.unregisterKeyListener=function(a,d,b,c){var g=
this._keycodeKey(d,b,a),m=this._keycodeCallbacks[g];a=this._registeredExtensions[a];m&&(c?(c=m.indexOf(c),this._keycodeCallbacks[g].splice(c,1)):delete this._keycodeCallbacks[g],a.source&&a.source.postMessage&&a.source.postMessage({type:"key_listen",keycode:d,modifiers:b,action:"remove"},a.extension.url))};b.prototype.registerClickHandler=function(a){if("function"!==typeof a)throw Error("callback must be a function");if(null!==this._clickHandler)throw Error("ClickHandler already registered");this._clickHandler=
a};b.prototype._handleAddonClick=function(a,d){"function"===typeof this._clickHandler&&this._clickHandler({addon_key:d.extension.addon_key,key:d.extension.key,extension_id:d.extension_id})};b.prototype.unregisterClickHandler=function(){this._clickHandler=null};b.prototype.getApiSpec=function(){function a(a){function b(a){return Object.getOwnPropertyNames(a).reduce(function(d,c){var g=a[c];switch("undefined"===typeof g?"undefined":y(g)){case "function":d[c]={args:p.argumentNames(g),returnsPromise:g.returnsPromise||
!1};break;case "object":g.hasOwnProperty("constructor")&&(d[c]=b(g))}return d},{})}var c=d._registeredAPIModules[a];if(!c)throw Error("unregistered API module: "+a);return b(c)}var d=this;return Object.getOwnPropertyNames(this._registeredAPIModules).reduce(function(d,b){d[b]=a(b);return d},{})};b.prototype._checkOrigin=function(a,d){var b=["init","event_query"],c=d&&!d.source&&-1<b.indexOf(a.data.type),b=d&&a.source===d.source;d=d&&0===d.extension.url.indexOf(a.origin)&&(c||b);"get_host_offset"===
a.data.type&&window===window.top&&(d=!0);"unload"!==a.data.type||!b&&void 0!==a.source||(d=!0);d||p.warn("Failed to validate origin: "+a.origin);return d};b.prototype.getRegisteredExtensions=function(a){return a?this._findRegistrations(a):this._registeredExtensions};b.prototype.unregisterExtension=function(a){a=this._findRegistrations(a);0!==a.length&&a.forEach(function(a){var d=this;Object.keys(this._pendingEvents).forEach(function(b){(d._pendingEvents[b].targetSpec||{}).addon_key===a.extension.addon_key&&
delete d._pendingEvents[b]});delete this._registeredExtensions[a.extension_id]},this)};return b}(x),da=function(){function c(){w(this,c);this._xdm=new ca}c.prototype.dispatch=function(b,a,d,c){this._xdm.queueEvent(b,a,d,c);return this.getExtensions(a)};c.prototype.broadcast=function(b,a,d){this._xdm.dispatch(b,a,d,null,null);return this.getExtensions(a)};c.prototype._createId=function(b){if(!b.addon_key||!b.key)throw Error("Extensions require addon_key and key");return b.addon_key+"__"+b.key+"__"+
p.randomString()};c.prototype.create=function(b,a){a=this.registerExtension(b,a);var d=b.options||{},d={extension_id:a,api:this._xdm.getApiSpec(),origin:p.locationOrigin(),options:d};return{id:a,name:JSON.stringify(d),src:b.url}};c.prototype.registerRequestNotifier=function(b){this._xdm.registerRequestNotifier(b)};c.prototype.registerExtension=function(b,a,d){var c=this._createId(b);this._xdm.registerExtension(c,{extension:b,initCallback:a,unloadCallback:d});return c};c.prototype.registerKeyListener=
function(b,a,d,c){this._xdm.registerKeyListener(b,a,d,c)};c.prototype.unregisterKeyListener=function(b,a,d,c){this._xdm.unregisterKeyListener(b,a,d,c)};c.prototype.registerClickHandler=function(b){this._xdm.registerClickHandler(b)};c.prototype.unregisterClickHandler=function(){this._xdm.unregisterClickHandler()};c.prototype.defineModule=function(b,a,d){this._xdm.defineAPIModule(a,b,d)};c.prototype.defineGlobals=function(b){this._xdm.defineAPIModule(b)};c.prototype.getExtensions=function(b){return this._xdm.getRegisteredExtensions(b)};
c.prototype.unregisterExtension=function(b){return this._xdm.unregisterExtension(b)};c.prototype.returnsPromise=function(b){b.returnsPromise=!0};return c}(),ea="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},ga=function(c,b){return b={exports:{}},c(b,b.exports),b.exports}(function(c){(function(b){function a(){}function d(a,d){return function(){a.apply(d,arguments)}}function g(a){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");
if("function"!==typeof a)throw new TypeError("not a function");this._state=0;this._handled=!1;this._value=void 0;this._deferreds=[];k(a,this)}function m(a,d){for(;3===a._state;)a=a._value;0===a._state?a._deferreds.push(d):(a._handled=!0,g._immediateFn(function(){var b=1===a._state?d.onFulfilled:d.onRejected;if(null===b)(1===a._state?q:f)(d.promise,a._value);else{var c;try{c=b(a._value)}catch(ba){f(d.promise,ba);return}q(d.promise,c)}}))}function q(a,b){try{if(b===a)throw new TypeError("A promise cannot be resolved with itself.");
if(b&&("object"===typeof b||"function"===typeof b)){var c=b.then;if(b instanceof g){a._state=3;a._value=b;e(a);return}if("function"===typeof c){k(d(c,b),a);return}}a._state=1;a._value=b;e(a)}catch(N){f(a,N)}}function f(a,d){a._state=2;a._value=d;e(a)}function e(a){2===a._state&&0===a._deferreds.length&&g._immediateFn(function(){a._handled||g._unhandledRejectionFn(a._value)});for(var d=0,b=a._deferreds.length;d<b;d++)m(a,a._deferreds[d]);a._deferreds=null}function l(a,d,b){this.onFulfilled="function"===
typeof a?a:null;this.onRejected="function"===typeof d?d:null;this.promise=b}function k(a,d){var b=!1;try{a(function(a){b||(b=!0,q(d,a))},function(a){b||(b=!0,f(d,a))})}catch(N){b||(b=!0,f(d,N))}}var h=setTimeout;g.prototype["catch"]=function(a){return this.then(null,a)};g.prototype.then=function(d,b){var c=new this.constructor(a);m(this,new l(d,b,c));return c};g.all=function(a){var d=Array.prototype.slice.call(a);return new g(function(a,b){function c(m,f){try{if(f&&("object"===typeof f||"function"===
typeof f)){var q=f.then;if("function"===typeof q){q.call(f,function(a){c(m,a)},b);return}}d[m]=f;0===--g&&a(d)}catch(fa){b(fa)}}if(0===d.length)return a([]);for(var g=d.length,m=0;m<d.length;m++)c(m,d[m])})};g.resolve=function(a){return a&&"object"===typeof a&&a.constructor===g?a:new g(function(d){d(a)})};g.reject=function(a){return new g(function(d,b){b(a)})};g.race=function(a){return new g(function(d,b){for(var c=0,g=a.length;c<g;c++)a[c].then(d,b)})};g._immediateFn="function"===typeof setImmediate&&
function(a){setImmediate(a)}||function(a){h(a,0)};g._unhandledRejectionFn=function(a){"undefined"!==typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",a)};g._setImmediateFn=function(a){g._immediateFn=a};g._setUnhandledRejectionFn=function(a){g._unhandledRejectionFn=a};c.exports?c.exports=g:b.Promise||(b.Promise=g)})(ea)}),R=p.each,X=window.document;h.bind=n("add","attach");h.unbind=n("remove","detach");h.onDomLoad=function(c){var b=window;"complete"===b.document.readyState?
c.call(b):h.bind(b,"load",function(){c.call(b)})};var D=new (function(){function c(){w(this,c);this.options={}}c.prototype._flush=function(){this.options={}};c.prototype.get=function(b){return b?this.options[b]:this.options};c.prototype.set=function(b,a){var d=this;if(b){if(a){var c;b=(c={},c[b]=a,c)}Object.getOwnPropertyNames(b).forEach(function(a){d.options[a]=b[a]},this)}};return c}()),O=function(c,b,a){c=null==c?"100%":c;var d,g=!!D.get("widthinpx");(a=a||r())||p.warn("size called before container or body appeared, ignoring");
g&&"string"===typeof c&&-1!==c.search("%")&&(c=Math.max(a.scrollWidth,a.offsetWidth,a.clientWidth));if(b)d=b;else if(b=Math.max(a.scrollHeight,document.documentElement.scrollHeight,a.offsetHeight,document.documentElement.offsetHeight,a.clientHeight,document.documentElement.clientHeight),a===document.body)d=b;else{var m=window.getComputedStyle(a);d=a.getBoundingClientRect().height;0===d?d=b:["margin-top","margin-bottom"].forEach(function(a){a=parseFloat(m[a]);d+=a})}return{w:c,h:d}},ha={add:function(c){var b=
r();e(b,c)},remove:function(){var c=r();c.resizeSensor&&(c.resizeObserver.disconnect(),c.removeChild(c.resizeSensor),delete c.resizeSensor,delete c.resizedAttached)}},ia=function(){function c(b){w(this,c);this.resizeError=p.throttle(function(a){console.info(a)},1E3);this.dimensionStores={width:[],height:[]};this.callback=b}c.prototype._setVal=function(b,a,d){this.dimensionStores[a]=this.dimensionStores[a].filter(function(a){return 400>d-a.setAt});this.dimensionStores[a].push({val:parseInt(b,10),setAt:d})};
c.prototype._isFlicker=function(b,a){return 5<=this.dimensionStores[a].length};c.prototype.triggered=function(b){b=b||O();var a=Date.now();this._setVal(b.w,"width",a);this._setVal(b.h,"height",a);var d=this._isFlicker(b.w,"width",a),a=this._isFlicker(b.h,"height",a);d&&(b.w="100%",this.resizeError("SIMPLE XDM: auto resize flickering width detected, setting to 100%"));a&&(d=this.dimensionStores.height.map(function(a){return a.val}),b.h=Math.max.apply(null,d)+"px",this.resizeError("SIMPLE XDM: auto resize flickering height detected, setting to: "+
b.h));this.callback(b.w,b.h)};return c}(),A=new (function(){function c(){w(this,c)}c.prototype._elementExists=function(b){return b&&1===b.length};c.prototype._elementOptions=function(b){return b.attr("data-options")};c.prototype._getConsumerOptions=function(){var b={},a=h("#ac-iframe-options"),d=h("script[src*\x3d'/atlassian-connect/all']");this._elementExists(a)&&this._elementOptions(a)||this._elementExists(d)&&(a=d);this._elementExists(a)&&(a=this._elementOptions(a))&&a.split(";").forEach(function(a){if(a=
a.trim()){var d=a.split(":");a=d[0].trim();d=d[1].trim();a&&null!=d&&(b[a]="true"===d||"false"===d?"true"===d:d)}});return b};c.prototype._flush=function(){delete this._options};c.prototype.get=function(b){this._options||(this._options=this._getConsumerOptions());return b?this._options[b]:this._options};return c}()),ja=["ctrl","shift","alt","meta"],ka=function(c){function b(a){w(this,b);var d=I(this,c.call(this));D.set(a);d._data=d._parseInitData();D.set(d._data.options);d._data.options=d._data.options||
{};d._hostOrigin=d._data.options.hostOrigin||"*";d._top=window.top;d._host=window.parent||window;d._topHost=d._getHostFrame(d._data.options.hostFrameOffset);d._topHost!==d._top&&d._verifyHostFrameOffset();d._isKeyDownBound=!1;d._hostModules={};d._eventHandlers={};d._pendingCallbacks={};d._keyListeners=[];d._version="5.1.21";d._apiTampered=void 0;d._isSubIframe=d._topHost!==window.parent;d._onConfirmedFns=[];d._data.api&&(d._setupAPI(d._data.api),d._setupAPIWithoutRequire(d._data.api));d._messageHandlers=
{resp:d._handleResponse,evt:d._handleEvent,key_listen:d._handleKeyListen,api_tamper:d._handleApiTamper};d._data.origin&&(d._sendInit(d._host,d._data.origin),d._isSubIframe&&d._sendInit(d._topHost,d._hostOrigin));d._registerOnUnload();d.resize=p._bind(d,function(a,b){if(r()){var c=O();a||(a=c.w);b||(b=c.h);d._hostModules.env&&d._hostModules.env.resize&&d._hostModules.env.resize(a,b)}else p.warn("resize called before container or body appeared, ignoring")});h(p._bind(d,d._autoResizer));d.container=
r;d.size=O;window.addEventListener("click",function(a){d._host.postMessage({eid:d._data.extension_id,type:"addon_clicked"},d._hostOrigin)});return d}H(b,c);b.prototype._getHostFrame=function(a){if(a&&"number"===typeof a){for(var d=window,b=0;b<a;b++)d=d.parent;return d}return this._top};b.prototype._verifyHostFrameOffset=function(){var a=this;window.addEventListener("message",function g(b){b.source===a._top&&b.data&&"number"===typeof b.data.hostFrameOffset&&(window.removeEventListener("message",g),
a._getHostFrame(b.data.hostFrameOffset)!==a._topHost&&(p.error("hostFrameOffset tampering detected, setting host frame to top window"),a._topHost=a._top))});this._top.postMessage({type:"get_host_offset"},this._hostOrigin)};b.prototype._handleApiTamper=function(a){!1!==a.data.tampered?(this._host=void 0,this._apiTampered=!0,p.error("XDM API tampering detected, api disabled")):(this._apiTampered=!1,this._onConfirmedFns.forEach(function(a){a.apply(null)}));this._onConfirmedFns=[]};b.prototype._registerOnUnload=
function(){h.bind(window,"unload",p._bind(this,function(){this._sendUnload(this._host,this._data.origin);this._sendUnload(this._topHost,this._hostOrigin)}))};b.prototype._sendUnload=function(a,d){a.postMessage({eid:this._data.extension_id,type:"unload"},d||"*")};b.prototype._bindKeyDown=function(){this._isKeyDownBound||(h.bind(window,"keydown",p._bind(this,this._handleKeyDownDomEvent)),this._isKeyDownBound=!0)};b.prototype._autoResizer=function(){this._enableAutoResize=!!D.get("autoresize");if(!1===
A.get("resize")||!0===A.get("sizeToParent"))this._enableAutoResize=!1;this._enableAutoResize&&this._initResize()};b.prototype._parseInitData=function(a){try{return JSON.parse(a||window.name)}catch(d){return{}}};b.prototype._findTarget=function(a,d){return this._data.options&&this._data.options.targets&&this._data.options.targets[a]&&this._data.options.targets[a][d]?this._data.options.targets[a][d]:"top"};b.prototype._createModule=function(a,d){var b=this;return Object.getOwnPropertyNames(d).reduce(function(c,
g){var m=d[g];m.hasOwnProperty("constructor")?c[g]=b._createProxy(a,m,g):c[g]=b._createMethodHandler({mod:a,fn:g,returnsPromise:m.returnsPromise});return c},{})};b.prototype._setupAPI=function(a){var d=this;this._hostModules=Object.getOwnPropertyNames(a).reduce(function(b,c){b[c]=d._createModule(c,a[c],a[c]._options);return b},{});Object.getOwnPropertyNames(this._hostModules._globals||{}).forEach(function(a){d[a]=d._hostModules._globals[a]})};b.prototype._setupAPIWithoutRequire=function(a){var b=
this;Object.getOwnPropertyNames(a).forEach(function(d){if("undefined"!==typeof b[d])throw Error("XDM module: "+d+" will collide with existing variable");b[d]=b._createModule(d,a[d])},this)};b.prototype._pendingCallback=function(a,b){this._pendingCallbacks[a]=b};b.prototype._createProxy=function(a,b,c){function d(a){if(!(this instanceof d))return new d(arguments);this._cls=c;this._id=p.randomString();g.constructor.apply(this,a);return this}var g=this._createModule(a,b);Object.getOwnPropertyNames(g).forEach(function(a){"constructor"!==
a&&(d.prototype[a]=g[a])});return d};b.prototype._createMethodHandler=function(a){var b=this;return function(){var d=p.argumentsToArray(arguments),c={eid:b._data.extension_id,type:"req",mod:a.mod,fn:a.fn},f,e,l=void 0,k=p.randomString();"top"===b._findTarget(a.mod,a.fn)?(e=b._topHost,f=b._hostOrigin):(e=b._host,f=b._data.origin);p.hasCallback(d)?(c.mid=k,b._pendingCallback(c.mid,d.pop())):a.returnsPromise&&(c.mid=k,l=new ga(function(a,d){b._pendingCallback(c.mid,function(b,c){b?d(b):a(c)})}),l.catch(function(a){p.warn("Failed promise: "+
a)}));this&&this._cls&&(c._cls=this._cls,c._id=this._id);c.args=p.sanitizeStructuredClone(d);b._isSubIframe&&"undefined"===typeof b._apiTampered?b._onConfirmedFns.push(function(){e.postMessage(c,f)}):e.postMessage(c,f);if(l)return l}};b.prototype._handleResponse=function(a){a=a.data;if(a.forPlugin){var b=this._pendingCallbacks[a.mid];if(b){delete this._pendingCallbacks[a.mid];try{b.apply(window,a.args)}catch(g){p.error(g.message,g.stack)}}}};b.prototype._handleEvent=function(a){function b(a){return a?
(Array.isArray(a)||(a=[a]),a):[]}var c=function(){var b=p.argumentsToArray(arguments);a.source.postMessage({eid:this._data.extension_id,mid:a.data.mid,type:"resp",args:b},this._data.origin)},m=a.data,c=p._bind(this,c);c._context={eventName:m.etyp};var f=b(this._eventHandlers[m.etyp]),f=f.concat(b(this._eventHandlers._any));f.forEach(function(a){try{a(m.evnt,c)}catch(qa){p.error("exception thrown in event callback for:"+m.etyp)}},this);m.mid&&c()};b.prototype._handleKeyDownDomEvent=function(a){var b=
[];ja.forEach(function(d){a[d+"Key"]&&b.push(d)},this);var c=this._keyListenerId(a.keyCode,b);0<=this._keyListeners.indexOf(c)&&this._host.postMessage({eid:this._data.extension_id,keycode:a.keyCode,modifiers:b,type:"key_triggered"},this._data.origin)};b.prototype._keyListenerId=function(a,b){var d=a;b&&("string"===typeof b&&(b=[b]),b.sort(),b.forEach(function(a){d+="$$"+a},this));return d};b.prototype._handleKeyListen=function(a){var b=this._keyListenerId(a.data.keycode,a.data.modifiers);"remove"===
a.data.action?(a=this._keyListeners.indexOf(b),this._keyListeners.splice(a,1)):"add"===a.data.action&&(this._bindKeyDown(),this._keyListeners.push(b))};b.prototype._checkOrigin=function(a){var b=["api_tamper"];return a.data&&-1<b.indexOf(a.data.type)||this._isSubIframe&&a.source===this._topHost?!0:a.origin===this._data.origin&&a.source===this._host};b.prototype._sendInit=function(a,b){var c;a===this._topHost&&this._topHost!==window.parent&&(c=D.get("targets"));a.postMessage({eid:this._data.extension_id,
type:"init",targets:c},b||"*")};b.prototype.sendSubCreate=function(a,b){b.id=a;this._topHost.postMessage({eid:this._data.extension_id,type:"sub",ext:b},this._hostOrigin)};b.prototype.broadcast=function(a,b){if(!p.isString(a))throw Error("Event type must be string");this._host.postMessage({eid:this._data.extension_id,type:"broadcast",etyp:a,evnt:b},this._data.origin)};b.prototype.require=function(a,b){var c=this;a=(Array.isArray(a)?a:[a]).map(function(a){return c._hostModules[a]||c._hostModules._globals[a]});
b.apply(window,a)};b.prototype.register=function(a){"object"===("undefined"===typeof a?"undefined":y(a))&&(this._eventHandlers=aa({},this._eventHandlers,a)||{},this._host.postMessage({eid:this._data.extension_id,type:"event_query",args:Object.getOwnPropertyNames(a)},this._data.origin))};b.prototype.registerAny=function(a){this.register({_any:a})};b.prototype._initResize=function(){this.resize();var a=new ia(this.resize);ha.add(p._bind(a,a.triggered))};return b}(x),k=new (function(c){function b(){w(this,
b);var a=I(this,c.call(this));a.parentTargets={_globals:{}};var d=new ka;Object.getOwnPropertyNames(d).forEach(function(a){-1===["_hostModules","_globals"].indexOf(a)&&void 0===this[a]&&(this[a]=d[a])},a);["registerAny","register"].forEach(function(a){this[a]=Object.getPrototypeOf(d)[a].bind(d)},a);var g=d._data.api;"object"===("undefined"===typeof g?"undefined":y(g))&&Object.getOwnPropertyNames(g).forEach(function(a){var b={};Object.getOwnPropertyNames(g[a]).forEach(function(c){g[a][c].hasOwnProperty("constructor")?
b[c]=d._hostModules[a][c].prototype:b[c]=d._hostModules[a][c]},this);this._xdm.defineAPIModule(b,a)},a);a._hostModules=d._hostModules;a.defineGlobal=function(a){this.parentTargets._globals=p.extend({},this.parentTargets._globals,a);this._xdm.defineAPIModule(a)};a.defineModule=function(a,b){this._xdm.defineAPIModule(b,a);this.parentTargets[a]={};Object.getOwnPropertyNames(b).forEach(function(b){this.parentTargets[a][b]="parent"},this)};a.subCreate=function(a,b){a.options=a.options||{};a.options.targets=
p.extend({},this.parentTargets,a.options.targets);b=this.create(a,b);d.sendSubCreate(b.id,a);return b};return a}H(b,c);return b}(da)),B=function(c,b,a,d){var g=!1;return function(){!g&&"undefined"!==typeof console&&console.warn&&(g=!0,console.warn("DEPRECATED API - "+b+" has been deprecated since ACJS "+d+(" and will be removed in a future release. "+(a?"Use "+a+" instead.":"No alternative will be provided."))),k._analytics.trackDeprecatedMethodUsed(b));return c.apply(void 0,arguments)}},v={each:t,
log:F,decodeQueryComponent:function(c){return null==c?null:decodeURIComponent(c.replace(/\+/g,"%20"))},bind:f("add","attach"),unbind:f("remove","detach"),extend:function(c){var b=arguments,b=[].slice.call(b,1,b.length);t(b,function(a,b){t(b,function(a,b){c[a]=b})});return c},trim:function(c){return c&&c.replace(/^\s+|\s+$/g,"")},debounce:function(c,b){var a;return function(){var d=this,g=[].slice.call(arguments);a&&clearTimeout(a);a=setTimeout(function(){a=null;c.apply(d,g)},b||50)}},isFunction:function(c){return"function"===
typeof c},handleError:function(c){if(!F.apply(this,c&&c.message?[c,c.message]:[c]))throw c;}},P=v.each,W=v.extend,la=window.document,C=W(function(c,b){b=b||la;var a=[];c&&("string"===typeof c?(c=b.querySelectorAll(c),P(c,function(b,c){a.push(c)})):1===c.nodeType?a.push(c):c===window&&a.push(c));W(a,{each:function(a){P(this,a);return this},bind:function(a,b){this.each(function(c,d){v.bind(d,a,b)})},attr:function(a){var b;this.each(function(c,d){b=d[a]||d.getAttribute&&d.getAttribute(a);return!b});
return b},removeClass:function(a){return this.each(function(b,c){c.className&&(c.className=c.className.replace(new RegExp("(^|\\s)"+a+"(\\s|$)")," "))})},html:function(a){return this.each(function(b,c){c.innerHTML=a})},append:function(a){return this.each(function(c,d){var g=b.createElement(a.tag);P(a,function(a,c){"$text"===a?g.styleSheet?g.styleSheet.cssText=c:g.appendChild(b.createTextNode(c)):"tag"!==a&&(g[a]=c)});d.appendChild(g)})}});return a},v),x=function(){function c(){w(this,c);this._events=
{};this.ANY_PREFIX="_any";this.methods="off offAll offAny on onAny once".split(" ")}c.prototype._anyListener=function(b,a){var c=a._context.eventName;a=this._events[this.ANY_PREFIX]||[];var g=this._events[c]||[];Array.isArray(b)||(b=[b]);a.forEach(function(a){var d=b.slice(0);d.unshift(c);d.push({args:b,name:c});a.apply(null,d)});g.forEach(function(a){a.apply(null,b)})};c.prototype.off=function(b,a){this._events[b]&&(a=this._events[b].indexOf(a),-1<a&&this._events[b].splice(a,1),0===this._events[b].length&&
delete this._events[b])};c.prototype.offAll=function(b){delete this._events[b]};c.prototype.offAny=function(b){this.off(this.ANY_PREFIX,b)};c.prototype.on=function(b,a){this._events[b]||(this._events[b]=[]);this._events[b].push(a)};c.prototype.onAny=function(b){this.on(this.ANY_PREFIX,b)};c.prototype.once=function(b,a){function c(){a.apply(null,arguments);g.off(b,c)}var g=this;this.on(b,c)};return c}(),E=new x,Q=new (function(c){function b(){w(this,b);var a=I(this,c.call(this));a.methods="offPublic offAllPublic offAnyPublic onPublic onAnyPublic oncePublic".split(" ");
return a}H(b,c);b.prototype._filterEval=function(a,b){var c=!0;if(!a)return c;switch("undefined"===typeof a?"undefined":y(a)){case "function":c=!!a.call(null,b);break;case "object":c=Object.getOwnPropertyNames(a).every(function(c){return b[c]===a[c]})}return c};b.prototype.once=function(a,b,c){function d(c){b.apply(null,c);g.off(a,d)}var g=this;this.on(a,d,c)};b.prototype.on=function(a,b,g){b._wrapped=function(a){this._filterEval(g,a.sender)&&b.apply(null,a.event)}.bind(this);c.prototype.on.call(this,
a,b._wrapped)};b.prototype.off=function(a,b){b._wrapped?c.prototype.off.call(this,a,b._wrapped):c.prototype.off.call(this,a,b)};b.prototype.onAny=function(a,b){a._wrapped=function(c){c.sender&&this._filterEval(b,c.sender)&&a.apply(null,c.event)};c.prototype.onAny.call(this,a._wrapped)};b.prototype.offAny=function(a){a._wrapped?c.prototype.offAny.call(this,name,a._wrapped):c.prototype.offAny.call(this,name,a)};return b}(x)),ma=1,x=B(function(){return k._data.options.customData},"AP.dialog.customData",
"AP.dialog.getCustomData()","5.0");Object.defineProperty(k._hostModules.dialog,"customData",{get:x});Object.defineProperty(k.dialog,"customData",{get:x});var z={};E.onAny(function(c,b){var a=c.match(/^dialog\.(\w+)/);a&&("dialog.button.click"===c?l(b.button.identifier,b):Y(a[1],b))});var na=k.dialog.create.prototype.constructor.bind({});k.dialog.create=k._hostModules.dialog.create=function(){var c=na.apply(void 0,arguments);c.on=B(L,'AP.dialog.on("close", callback)','AP.events.on("dialog.close", callback)',
"5.0");return c};k.dialog._disableCloseOnSubmit=!1;k.dialog.disableCloseOnSubmit=function(){k.dialog._disableCloseOnSubmit=!0};var oa=k.dialog.getButton.prototype.constructor.bind({});k.dialog.getButton=k._hostModules.dialog.getButton=function(c){try{var b=oa(c);b.bind=B(function(a){return L(c,a)},"AP.dialog.getDialogButton().bind()",'AP.events.on("dialog.message", callback)',"5.0");return b}catch(a){return{}}};var pa=k.dialog.createButton.prototype.constructor.bind({});k.dialog.createButton=k._hostModules.dialog.createButton=
function(c){var b={};"object"!==("undefined"===typeof c?"undefined":y(c))?(b.text=c,b.identifier=c):b=c;b.identifier||(b.identifier="user.button."+ma++);pa(b);return k.dialog.getButton(b.identifier)};k.dialog.onDialogMessage=k._hostModules.dialog.onDialogMessage=B(L,"AP.dialog.onDialogMessage()",'AP.events.on("dialog.message", callback)',"5.0");k.Dialog||(k.Dialog=k._hostModules.Dialog=k.dialog);var G={},K={define:function(c,b,a){var d=T(c),g;a||(a=b,b=[]);a&&(g="function"!==typeof a?function(){return a}:
a,S(b,function(){var a=g.apply(window,arguments);if(a){"function"===typeof a&&(d.exports.__target__=a);for(var b in a)a.hasOwnProperty(b)&&(d.exports[b]=a[b])}}))},require:function(c,b){S("string"===typeof c?[c]:c,b)}};k._hostModules._dollar=C;k._hostModules["inline-dialog"]=k._hostModules.inlineDialog;!0===A.get("sizeToParent")&&k.env.sizeToParent(!0===A.get("hideFooter"));!0===A.get("base")&&k.env.getLocation(function(c){C("head").append({tag:"base",href:c,target:"_parent"})});C.each(E.methods,
function(c,b){k._hostModules.events[b]=k.events[b]=E[b].bind(E);k._hostModules.events[b+"Public"]=k.events[b+"Public"]=Q[b].bind(Q)});k.define=B(function(){return K.define.apply(K,arguments)},"AP.define()",null,"5.0");k.require=B(function(){return K.require.apply(K,arguments)},"AP.require()",null,"5.0");x=k._data.options.isDialog?"10px 10px 0 10px":"0";!1!==A.get("margin")&&C("head").append({tag:"style",type:"text/css",$text:"body {margin: "+x+" !important;}"});k.Meta={get:M};k.meta=M;k.localUrl=
function(c){var b=M("local-base-url");return"undefined"===typeof b||"undefined"===typeof c?b:""+b+c};k._hostModules._util=k._util={each:v.each,log:v.log,decodeQueryComponent:v.decodeQueryComponent,bind:v.bind,unbind:v.unbind,extend:v.extend,trim:v.trim,debounce:v.debounce,isFunction:v.isFunction,handleError:v.handleError};k.defineModule&&k.defineModule("env",{resize:function(c,b,a){a=document.getElementById(a._context.extension_id);a.style.width=c+("number"===typeof c?"px":"");a.style.height=b+("number"===
typeof b?"px":"")}});k._data&&k._data.origin&&k.registerAny(function(c,b){c&&c.event&&c.sender?Q._anyListener(c,b):E._anyListener(c,b)});return k}();"use strict";!function(){function h(h){AP.history._registerPopStateListener();n.push(h)}if(AP._hostModules.history){var n=[];AP.register({history_popstate:function(h){n.forEach(function(n){n(h)})}});AP._hostModules.history.popState=h;AP.history.popState=h}}();"use strict";
(function(){function h(f,e){var l,h;if(f)if(l=f.length,null!=l&&"function"!==typeof f)for(h=0;h<l&&!1!==e.call(f[h],h,f[h]);)h+=1;else for(h in f)if(f.hasOwnProperty(h)&&!1===e.call(f[h],h,f[h]))break}function n(f){var e=arguments,e=[].slice.call(e,1,e.length);h(e,function(e,t){h(t,function(e,l){f[e]=l})});return f}function r(f){return f instanceof Blob&&f.name?{blob:f,name:f.name,_isBlob:!0}:f}function u(f){var e=n({},f),l=f.headers||{};delete e.headers;return n(e,{getResponseHeader:function(f){var e=
null;f&&(f=f.toLowerCase(),h(l,function(l,h){if(l.toLowerCase()===f)return e=h,!1}));return e},getAllResponseHeaders:function(){var f="";h(l,function(e,l){f+=(f?"\r\n":"")+e+": "+l});return f}})}function e(f,e){"string"===typeof f&&("object"===typeof e?(e.url=f,f=e):f={url:f});if(f.success){var l=f.success;delete f.success;var h=f.error||function(){};delete f.error;e=function(f,e,t){!1===f?l(t,"success",u(e)):h(u(e),"error",f)}}"multipart/form-data"===f.contentType&&Object.keys(f.data).forEach(function(e){var l=
f.data[e];Array.isArray(l)?l.forEach(function(l,h){f.data[e][h]=r(l)}):f.data[e]=r(l)});t(f,e)}if(AP._hostModules._globals.request){try{new File([],"")}catch(f){File=function(e,f,h){e=new Blob(e,h);e.name=f;e.lastModifiedDate=new Date;return e}}var t=AP._hostModules._globals.request.bind({});AP._hostModules._globals.request=e;AP.request=e}})();
(function(){function h(e,h){if("number"!==typeof e)return window.top;h=h||window;for(var f=0;f<e;f++)h=h.parent;return h}function n(e){function t(){var e=document.getElementById(f.containerId);window._AP.addonAttemptCounter[f.containerId]++;if(e)if(delete window._AP.addonAttemptCounter[f.containerId],window._AP.isSubHost){e.appendChild(n);var e=n.contentDocument,h="(function(){ var w \x3d window; for (var i\x3d0; i\x3c"+f.options.hostFrameOffset+"; i++){w \x3d w.parent; } w.postMessage("+JSON.stringify({type:"set_inner_iframe_url",
iframeData:f})+', "*");}());';e.open();e.write("\x3cscript\x3e"+h+"\x3c/script\x3e");e.close()}else n.appendTo(e),n.data("addon-key",f.addon_key),n.data("key",f.key);else 10>=window._AP.addonAttemptCounter[f.containerId]&&r(t)}window._AP.isSubHost=h(e.hostFrameOffset)!==window;var f=window._AP._convertConnectOptions(e),n;window._AP.isSubHost?n=window._AP._createSub(f):(u({addon_key:f.addon_key,key:f.key}).forEach(function(e){e.extension.options.uniqueKey===f.options.uniqueKey&&((window.connectHost||
window.AP).destroy(e.extension_id),AJS.$(e.extension.$el).closest(".ap-iframe-container").remove())},this),n=(window.connectHost||window.AP).create(f));window._AP.addonAttemptCounter[f.containerId]=0;t()}var r=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,50)}}(),u=function(e){return(window.connectHost||window.AP).getExtensions(e).filter(function(e){return!!document.getElementById(e.extension_id)})};
window._AP=window._AP||{};window._AP.addonAttemptCounter=window._AP.addonAttemptCounter||{};window._AP._convertConnectOptions=function(e){var h={url:e.url,ns:e.uniqueKey,addon_key:e.addon_key,key:e.key,containerId:"embedded-"+e.uniqueKey,options:{history:{state:""},uniqueKey:e.uniqueKey,origin:e.origin,hostOrigin:e.hostOrigin,isFullPage:"1"===e.general,autoresize:!0,user:{timeZone:e.timeZone,fullName:e.fullName,uid:e.uid,ukey:e.ukey},productContext:JSON.parse(e.productCtx||"{}"),contextPath:e.cp,
width:e.w||e.width,height:e.h||e.height,targets:{env:{resize:"both"}}}};"string"===typeof e.contentClassifier&&(h.options.contentClassifier=e.contentClassifier);"number"===typeof e.hostFrameOffset&&(h.options.hostFrameOffset=e.hostFrameOffset+1);window._AP.isSubHost||(h.options.history.state=window.location.hash?window.location.hash.substr(2):"");return h};window._AP._createSub=function(e){var h=document.createElement("iframe"),f=(window.connectHost||window.AP).subCreate(e);f.width=e.options.width||
"";f.height=e.options.height||"";f.style="border:0;";f["class"]="ap-iframe";f["data-addon-key"]=e.addon_key;f["data-key"]=e.key;delete f.src;Object.getOwnPropertyNames(f).forEach(function(e){h.setAttribute(e,f[e])});return h};window._AP.appendConnectAddon=function(e){if(window!==window.top){var h=function(f){f.source===window.top&&f.data&&void 0!==f.data.hostFrameOffset&&(window.removeEventListener("message",h),e.hostFrameOffset=f.data.hostFrameOffset,n(e))};window.addEventListener("message",h);window.top.postMessage({type:"get_host_offset"},
"*")}else n(e)}})();
(function(){function h(e){return"function"===typeof e}if(AP.jira){var n,r,u=function(){},e,t={onSaveValidation:function(e){r=e},onSave:function(e){n=e},trigger:function(){var e=!0;h(r)&&(e=r.call());var f;n&&(f=n.call());e={valid:e,value:e?""+f:void 0};AP.jira._submitWorkflowConfigurationResponse(e);return e}};AP.register({jira_workflow_post_function_submit:function(){t.trigger()}});AP.jira.WorkflowConfiguration=AP._hostModules.jira.WorkflowConfiguration=t;AP.register({jira_dashboard_item_edit:function(){u.call()}});AP.jira.DashboardItem=
AP._hostModules.jira.DashboardItem={onDashboardItemEdit:function(e){u=e}};var f=AP._hostModules.jira.openDatePicker.bind({});AP.jira.openDatePicker=AP._hostModules.jira.openDatePicker=function(l){if(!l.position||"object"!==typeof l.position){var n=l.element;if(!n||!n.nodeType||1!=n.nodeType)throw Error("Providing either options.position or options.element is required.");l.position={}}if(!l.onSelect||!h(l.onSelect))throw Error("options.onSelect function is a required parameter.");l={element:l.element,
position:{top:l.position.top||0,left:l.position.left||0},date:l.date,showTime:!!l.showTime,onSelect:l.onSelect};e=l.onSelect;delete l.onSelect;l.element&&(n=l.element.getBoundingClientRect(),l.position={left:n.left,top:n.top+n.height},delete l.element);f(l)};AP.register({jira_date_selected:function(f){h(e)&&e.call({},f.isoDate,f.date)}});var F=AP._hostModules.jira.openCreateIssueDialog.bind({});AP.jira.openCreateIssueDialog=AP._hostModules.jira.openCreateIssueDialog=function(e,f){F(f,e)}}})();
if(AP._hostModules.confluence){var original_onMacroPropertyPanelEvent=AP._hostModules.confluence.onMacroPropertyPanelEvent.bind({});AP.confluence.onMacroPropertyPanelEvent=AP._hostModules.confluence.onMacroPropertyPanelEvent=function(h){AP.register(h);original_onMacroPropertyPanelEvent()}}
(function(){if(AP.dropdownList){var h={},n={},r=AP._hostModules.dropdownList.create,u=function(){var e=r();e.onSelect=function(n){h[e._id]=n};e.onHide=function(h){n[e._id]=h};return e};AP._hostModules.dropdownList.create=u;AP.dropdownList.create=u;AP.register({dropdown_list_select:function(e){var n=h[e.id];n&&n.call({},e.data)},dropdown_list_hide:function(e){(e=n[e.id])&&e.call({})}})}})();
AP._hostModules.user&&AP._hostModules.env&&Object.getOwnPropertyNames(AP._hostModules.user).forEach(function(h){AP[h]=AP.env[h]=AP._hostModules.env[h]=AP._hostModules.user[h]});AP.env&&(AP.getLocation=AP._hostModules._globals.getLocation=AP._hostModules.env.getLocation,AP.sizeToParent=AP._hostModules._globals.sizeToParent=AP._hostModules.env.sizeToParent);
AP._hostModules.history&&function(){var h="";AP._data.options.history&&AP._data.options.history.state&&(h=AP._data.options.history.state);AP.history.popState(function(e){h=e.newURL});var n=AP._hostModules.history.getState.bind({});AP.history.getState=AP._hostModules.history.original_getState=function(e){if(e)n(e);else return h};var r=AP._hostModules.history.pushState.bind({});AP.history.pushState=AP._hostModules.history.pushState=function(e){h=e;r(e)};var u=AP._hostModules.history.replaceState.bind({});
AP.history.replaceState=AP._hostModules.history.replaceState=function(e){h=e;u(e)}}();if(AP._hostModules.dialog&&AP._hostModules.Dialog){var isCloseOnEscape=function(h){h(!AP._data.options.preventDialogCloseOnEscape)};AP._hostModules.dialog.isCloseOnEscape=AP._hostModules.Dialog.isCloseOnEscape=isCloseOnEscape;AP.dialog.isCloseOnEscape=AP.Dialog.isCloseOnEscape=isCloseOnEscape};